<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="refresh" content="900"> <!-- Refresh every 15 minutes (900 seconds) -->
    <title>Aaron's News Scraper</title>
    <link rel="icon" href="{{ url_for('favicon') }}" type="image/x-icon">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        main {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            width: 100%;
            max-width: 1200px;
            margin-top: 20px;
        }

        .column {
            flex: 1;
            margin: 10px;
        }

        .left-column {
            flex-basis: 25%;
            text-align: left; /* Adjust text alignment for the left column */
        }

        .right-column {
            flex-basis: 75%;
            text-align: left; /* Adjust text alignment for the right column */
        }

        ul {
            list-style: none;
            padding: 0;
        }

        h1, h3 {
            margin-bottom: 10px;
        }

        h5 {
            margin-top: 0;
        }

        p {
            margin: 0; /* Remove default margin for paragraphs */
        }

        /* Style for story content */
        .story-content {
            margin-top: 20px;
        }

        /* Add small bullets with little space between the bullet and the headline */
        .left-column ul li {
            list-style-type: disc; /* Use disc as the bullet style */
            margin-bottom: 4px; /* Adjust the space between the bullet and the text */
            color: orange; /* Set the color of the bullet to orange */
        }
    </style>
</head>
<body>
    <!-- Centered heading with Last Update Time and Chicago temperature -->
    <h1>Aaron's News Scraper</h1>
    <h5>Last Update: {{ last_update }} | Chicago, IL Temperature: {{ chicago_temperature }}Â°F</h5>

    <!-- Two columns layout -->
    <main>
        <!-- Left column for headlines and links -->
        <div class="column left-column">
            <!-- Display CNN Lite Headlines -->
            <h3>CNN Lite Headlines</h3>
            <ul>
                {% for i in range(10) %}
                    <!-- Display each headline as a list item with a link -->
                    <li><a href="#" class="headline-link" data-url="{{ cnn_links[i] }}">{{ cnn_headlines[i] }}</a></li>
                {% endfor %}
            </ul>

            <!-- Display NPR Headlines -->
            <h3>NPR Headlines</h3>
            <ul>
                {% for i in range(10) %}
                    <!-- Display each NPR headline as a list item with a link -->
                    <li><a href="#" class="headline-link" data-url="{{ npr_links[i] }}">{{ npr_headlines[i] }}</a></li>
                {% endfor %}
            </ul>
        </div>

        <!-- Right column for displaying the story when a headline link is clicked -->
        <div class="column right-column">
            <!-- Placeholder for the story content -->
            <h3>Story</h3>
            <div class="story-content" id="story-content-placeholder">
                <p>Select a headline to view the story.</p>
            </div>
        </div>
    </main>

    <script>
        // JavaScript to handle click events on headline links
        document.addEventListener("DOMContentLoaded", function() {
            var headlineLinks = document.querySelectorAll('.headline-link');
            var storyContentPlaceholder = document.getElementById('story-content-placeholder');

            headlineLinks.forEach(function(link) {
                link.addEventListener('click', function(event) {
                    event.preventDefault();

                    // Fetch content from the provided URL
                    var url = link.getAttribute('data-url');
                    fetch(url)
                        .then(response => response.text())
                        .then(content => {
                            // Update the story content in the right column
                            storyContentPlaceholder.innerHTML = content;
                        })
                        .catch(error => {
                            console.error('Error fetching content:', error);
                            storyContentPlaceholder.innerHTML = '<p>Error loading the story.</p>';
                        });
                });
            });
        });
    </script>
</body>
</html>
